{% extends "base.html" %}

{% block extra_head %}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

<style>
  /* ðŸ”¥ Page content center and lower position */
  .page-area {
    display: flex;
    justify-content: center;
    width: 100%;
    padding: 20px;
    margin-top: 100px;      /* ðŸ‘ˆ page à¤•à¥‹ à¤¨à¥€à¤šà¥‡ à¤²à¤¾à¤¯à¤¾ */
    margin-bottom: 40px;
  }

  .bill-container {
    max-width: 640px;
    width: 100%;
    background: #fff;
    border-radius: 16px;
    padding: 30px 32px;
    box-shadow: 0 8px 28px rgba(0,0,0,0.12);
  }

  .bill-title { 
    font-size: 1.6rem; 
    font-weight: 700; 
    color: #007bff; 
    margin-bottom: 20px; 
    display:flex; 
    gap:8px; 
    align-items:center;
    justify-content:center; /* ðŸ”¥ Title perfectly center */
  }

  label.form-label { font-size:1.05rem; font-weight:600; }
  .form-select { height:50px; font-size:1.05rem; }
  .btn-primary { height:50px; font-size:1.1rem; font-weight:700; }
  p.text-muted { font-size:0.95rem; margin-top:14px; text-align:center; }
</style>
{% endblock %}

{% block content %}

<div class="page-area">
  <div class="bill-container">

    <div class="bill-title">ðŸ“‹ Create New Bill</div>

    <form method="POST">
      {% csrf_token %}

      <label class="form-label">Customer Name:</label>

      <select id="customerSelect" name="customer_name" class="form-select" required>
        <option value="">-- Select Customer --</option>
        {% for c in customers %}
          <option value="{{ c.name }}" data-phone="{{ c.phone }}">{{ c.name }} ({{ c.phone }})</option>
        {% endfor %}
      </select>

      <input type="hidden" id="customerPhone" name="phone">

      <button class="btn btn-primary w-100 mt-3">Done</button>
      <p class="text-muted">Fill details carefully before adding items.</p>
    </form>

  </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script>
  $(document).ready(function(){
    $('#customerSelect').select2({
      placeholder: 'Search or Select Customer',
      allowClear: true,
      width: '100%',
      matcher: function(params, data) {
        if ($.trim(params.term) === '') {
          if (data.element.value === '') return null;
          return data;
        }
        const term = params.term.toLowerCase();
        const text = (data.text || '').toLowerCase();
        return text.indexOf(term) > -1 ? data : null;
      }
    });
  });
</script>
{% endblock %}
